<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Interactivo de Madurez de Ciberseguridad</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .dashboard-container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 0.8s ease-out;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00f2fe, #4facfe, #00f2fe);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 3s ease infinite;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.8;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: fadeIn 1s ease-out;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
        }
        
        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .metric-label {
            opacity: 0.8;
            font-size: 0.9em;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .viz-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeInUp 0.8s ease-out;
        }
        
        .viz-card h2 {
            margin-bottom: 20px;
            color: #4facfe;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .domain-selector {
            margin-bottom: 20px;
        }
        
        .domain-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .domain-tab {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }
        
        .domain-tab:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .domain-tab.active {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4);
        }
        
        .questions-container {
            max-height: 500px;
            overflow-y: auto;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
        }
        
        .questions-container::-webkit-scrollbar {
            width: 10px;
        }
        
        .questions-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }
        
        .questions-container::-webkit-scrollbar-thumb {
            background: rgba(79, 172, 254, 0.5);
            border-radius: 5px;
        }
        
        .question-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .question-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(5px);
        }
        
        .question-text {
            font-weight: 500;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .question-response {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .response-options {
            display: flex;
            gap: 10px;
        }
        
        .response-option {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .response-option.selected {
            background: rgba(255, 255, 255, 0.2);
            border-color: #4facfe;
            box-shadow: 0 0 10px rgba(79, 172, 254, 0.5);
        }
        
        .response-option.no {
            background: rgba(255, 107, 107, 0.2);
        }
        
        .response-option.partial {
            background: rgba(255, 193, 61, 0.2);
        }
        
        .response-option.yes {
            background: rgba(107, 207, 127, 0.2);
        }
        
        .response-option.optimal {
            background: rgba(79, 172, 254, 0.2);
        }
        
        .impact-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .impact-bar {
            flex: 1;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .impact-fill {
            height: 100%;
            transition: width 0.5s ease;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        .gap-analysis {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            animation: fadeInUp 1s ease-out;
        }
        
        .gap-item {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            transition: background 0.3s ease;
            cursor: pointer;
        }
        
        .gap-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }
        
        .gap-label {
            flex: 1;
            font-weight: 500;
        }
        
        .gap-bar {
            flex: 2;
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            margin: 0 20px;
        }
        
        .gap-fill-current {
            position: absolute;
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ff8787);
            border-radius: 15px;
            transition: width 1s ease-out;
        }
        
        .gap-fill-target {
            position: absolute;
            height: 100%;
            background: rgba(76, 172, 254, 0.3);
            border-radius: 15px;
            border: 2px solid #4facfe;
        }
        
        .gap-value {
            min-width: 100px;
            text-align: right;
            font-weight: bold;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .info-box {
            background: rgba(79, 172, 254, 0.1);
            border: 1px solid rgba(79, 172, 254, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 0.9em;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="header">
            <h1>Dashboard Interactivo de Madurez de Ciberseguridad</h1>
            <p>Evaluaci√≥n Detallada con An√°lisis de Respuestas - Ciberplan</p>
        </div>
        
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-label">Madurez Global Actual</div>
                <div class="metric-value" style="color: #ff6b6b;" id="globalMaturity">52%</div>
                <div class="metric-label">Nivel <span id="currentLevel">2.1</span> de 4</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Objetivo de Madurez</div>
                <div class="metric-value" style="color: #4facfe;">100%</div>
                <div class="metric-label">Nivel 4 de 4</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Brecha a Cerrar</div>
                <div class="metric-value" style="color: #ffd93d;" id="gapValue">48%</div>
                <div class="metric-label"><span id="gapLevel">1.9</span> niveles</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Preguntas Respondidas</div>
                <div class="metric-value" style="color: #6bcf7f;"><span id="answeredQuestions">22</span>/22</div>
                <div class="metric-label">7 dominios evaluados</div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="viz-card">
                <h2>Radar de Madurez por Dominio</h2>
                <div class="info-box" style="margin-bottom: 15px;">
                    üéØ Visualizaci√≥n de objetivos escalonados: corto plazo (6 meses), medio plazo (1 a√±o) y largo plazo (2 a√±os)
                </div>
                <div class="chart-container">
                    <canvas id="radarChart"></canvas>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-box" style="background: rgba(255, 107, 107, 0.7);"></div>
                        <span>Estado Actual</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-box" style="background: rgba(255, 193, 61, 0.7);"></div>
                        <span>Objetivo 6 meses</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-box" style="background: rgba(107, 207, 127, 0.7);"></div>
                        <span>Objetivo 1 a√±o</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-box" style="background: rgba(76, 172, 254, 0.7);"></div>
                        <span>Objetivo 2 a√±os</span>
                    </div>
                </div>
            </div>
            
            <div class="viz-card">
                <h2>Detalle de Respuestas por Dominio</h2>
                <div class="info-box">
                    üí° Haz clic en los dominios para ver las preguntas y respuestas. Las respuestas impactan directamente en el nivel de madurez.
                </div>
                <div class="domain-tabs" id="domainTabs"></div>
                <div class="questions-container" id="questionsContainer"></div>
            </div>
        </div>
        
        <div class="viz-card full-width">
            <h2>Plan de Mejora Escalonado</h2>
            <div class="info-box" style="margin-bottom: 20px;">
                üìÖ Roadmap de madurez con objetivos realistas y alcanzables por etapas
            </div>
            <div class="chart-container" style="height: 300px;">
                <canvas id="roadmapChart"></canvas>
            </div>
        </div>
        
        <div class="gap-analysis">
            <h2 style="color: #4facfe; margin-bottom: 20px;">An√°lisis de Brechas por Dominio</h2>
            <div id="gapAnalysis"></div>
        </div>
    </div>
    
    <script>
        // Datos completos del cuestionario con preguntas y respuestas simuladas
        const datosCompletos = [
            {
                dominio: 'Protecci√≥n de acceso',
                nivelActual: 1.67,
                nivelObjetivo: 4,
                objetivo6meses: 2.5,
                objetivo1a√±o: 3,
                objetivo2a√±os: 4,
                porcentaje: 42,
                preguntas: [
                    {
                        texto: '¬øTodos los empleados utilizan contrase√±as √∫nicas y seguras?',
                        respuesta: 'Parcialmente',
                        nivel: 2,
                        impacto: 'Medio',
                        recomendacion: 'Implementar pol√≠tica de contrase√±as robustas con gestor de contrase√±as'
                    },
                    {
                        texto: '¬øLa autenticaci√≥n multifactor est√° activada en cuentas cr√≠ticas?',
                        respuesta: 'No',
                        nivel: 1,
                        impacto: 'Alto',
                        recomendacion: 'Activar MFA inmediatamente en todas las cuentas administrativas'
                    },
                    {
                        texto: '¬øExisten pol√≠ticas de cambio regular de contrase√±as?',
                        respuesta: 'Parcialmente',
                        nivel: 2,
                        impacto: 'Medio',
                        recomendacion: 'Establecer pol√≠tica de rotaci√≥n cada 90 d√≠as'
                    }
                ]
            },
            {
                dominio: 'Seguridad en dispositivos y redes',
                nivelActual: 2.33,
                nivelObjetivo: 4,
                objetivo6meses: 3,
                objetivo1a√±o: 3.5,
                objetivo2a√±os: 4,
                porcentaje: 58,
                preguntas: [
                    {
                        texto: '¬øEl sistema operativo y software est√°n actualizados?',
                        respuesta: 'S√≠',
                        nivel: 3,
                        impacto: 'Alto',
                        recomendacion: 'Mantener proceso actual y automatizar donde sea posible'
                    },
                    {
                        texto: '¬øTodos los dispositivos tienen antivirus y firewall activos?',
                        respuesta: 'Parcialmente',
                        nivel: 2,
                        impacto: 'Alto',
                        recomendacion: 'Implementar soluci√≥n EDR centralizada'
                    },
                    {
                        texto: '¬øLa red Wi-Fi est√° protegida con cifrado fuerte?',
                        respuesta: 'Parcialmente',
                        nivel: 2,
                        impacto: 'Medio',
                        recomendacion: 'Migrar a WPA3 y segmentar red de invitados'
                    }
                ]
            },
            {
                dominio: 'Protecci√≥n de datos',
                nivelActual: 2.67,
                nivelObjetivo: 4,
                objetivo6meses: 3,
                objetivo1a√±o: 3.5,
                objetivo2a√±os: 4,
                porcentaje: 67,
                preguntas: [
                    {
                        texto: '¬øSe realizan copias de seguridad peri√≥dicas de los datos cr√≠ticos?',
                        respuesta: 'S√≠',
                        nivel: 3,
                        impacto: 'Alto',
                        recomendacion: 'Verificar restauraci√≥n peri√≥dicamente'
                    },
                    {
                        texto: '¬øLos datos confidenciales est√°n cifrados en tr√°nsito y en reposo?',
                        respuesta: 'Parcialmente',
                        nivel: 2,
                        impacto: 'Alto',
                        recomendacion: 'Implementar cifrado completo de disco y TLS'
                    },
                    {
                        texto: '¬øEl acceso a informaci√≥n sensible est√° restringido seg√∫n roles?',
                        respuesta: 'S√≠',
                        nivel: 3,
                        impacto: 'Alto',
                        recomendacion: 'Revisar y auditar permisos trimestralmente'
                    }
                ]
            },
            {
                dominio: 'Prevenci√≥n de amenazas',
                nivelActual: 2.33,
                nivelObjetivo: 4,
                objetivo6meses: 3,
                objetivo1a√±o: 3.5,
                objetivo2a√±os: 4,
                porcentaje: 58,
                preguntas: [
                    {
                        texto: '¬øSe capacita regularmente a los empleados sobre phishing y otras amenazas?',
                        respuesta: 'Parcialmente',
                        nivel: 2,
                        impacto: 'Alto',
                        recomendacion: 'Programa mensual de concienciaci√≥n con simulaciones'
                    },
                    {
                        texto: '¬øExisten protocolos para verificar correos electr√≥nicos y enlaces?',
                        respuesta: 'S√≠',
                        nivel: 3,
                        impacto: 'Medio',
                        recomendacion: 'Implementar herramientas automatizadas de verificaci√≥n'
                    },
                    {
                        texto: '¬øSe utilizan herramientas de detecci√≥n de amenazas en la empresa?',
                        respuesta: 'Parcialmente',
                        nivel: 2,
                        impacto: 'Alto',
                        recomendacion: 'Implementar SIEM y SOC'
                    }
                ]
            },
            {
                dominio: 'Gesti√≥n de accesos y permisos',
                nivelActual: 1.33,
                nivelObjetivo: 4,
                objetivo6meses: 2,
                objetivo1a√±o: 3,
                objetivo2a√±os: 4,
                porcentaje: 33,
                preguntas: [
                    {
                        texto: '¬øSe gestionan eficientemente los accesos y permisos de los empleados?',
                        respuesta: 'No',
                        nivel: 1,
                        impacto: 'Alto',
                        recomendacion: 'Implementar sistema IAM centralizado'
                    },
                    {
                        texto: '¬øLos privilegios de administrador est√°n limitados a personal autorizado?',
                        respuesta: 'Parcialmente',
                        nivel: 2,
                        impacto: 'Alto',
                        recomendacion: 'Aplicar principio de menor privilegio'
                    },
                    {
                        texto: '¬øSe implementan soluciones de gesti√≥n de identidad y acceso (IAM)?',
                        respuesta: 'No',
                        nivel: 1,
                        impacto: 'Alto',
                        recomendacion: 'Evaluar e implementar soluci√≥n IAM'
                    }
                ]
            },
            {
                dominio: 'Respuesta ante incidentes',
                nivelActual: 2.67,
                nivelObjetivo: 4,
                objetivo6meses: 3,
                objetivo1a√±o: 3.5,
                objetivo2a√±os: 4,
                porcentaje: 67,
                preguntas: [
                    {
                        texto: '¬øLa empresa cuenta con un plan de respuesta ante ciberataques?',
                        respuesta: 'S√≠',
                        nivel: 3,
                        impacto: 'Alto',
                        recomendacion: 'Realizar simulacros trimestrales'
                    },
                    {
                        texto: '¬øExiste un equipo o responsable de gesti√≥n de incidentes?',
                        respuesta: 'Parcialmente',
                        nivel: 2,
                        impacto: 'Alto',
                        recomendacion: 'Formalizar equipo CSIRT'
                    },
                    {
                        texto: '¬øLos incidentes de seguridad se reportan y documentan adecuadamente?',
                        respuesta: 'S√≠',
                        nivel: 3,
                        impacto: 'Medio',
                        recomendacion: 'Implementar sistema de tickets para incidentes'
                    }
                ]
            },
            {
                dominio: 'Identificaci√≥n de procesos cr√≠ticos',
                nivelActual: 1.75,
                nivelObjetivo: 4,
                objetivo6meses: 2.5,
                objetivo1a√±o: 3,
                objetivo2a√±os: 4,
                porcentaje: 44,
                preguntas: [
                    {
                        texto: '¬øSe tiene un inventario actualizado de activos tecnol√≥gicos clave?',
                        respuesta: 'Parcialmente',
                        nivel: 2,
                        impacto: 'Alto',
                        recomendacion: 'Implementar CMDB y descubrimiento autom√°tico'
                    },
                    {
                        texto: '¬øLos procesos cr√≠ticos de negocio han sido identificados y documentados?',
                        respuesta: 'No',
                        nivel: 1,
                        impacto: 'Alto',
                        recomendacion: 'Realizar BIA completo'
                    },
                    {
                        texto: '¬øSe eval√∫an regularmente los riesgos asociados a los activos y procesos esenciales?',
                        respuesta: 'Parcialmente',
                        nivel: 2,
                        impacto: 'Alto',
                        recomendacion: 'Establecer proceso de evaluaci√≥n trimestral'
                    },
                    {
                        texto: '¬øSe aplican medidas de monitoreo y protecci√≥n para los activos m√°s sensibles?',
                        respuesta: 'Parcialmente',
                        nivel: 2,
                        impacto: 'Alto',
                        recomendacion: 'Implementar DLP y monitoreo continuo'
                    }
                ]
            }
        ];
        
        let selectedDomain = 0;
        let radarChart, roadmapChart;
        
        // Funci√≥n para calcular estad√≠sticas globales
        function calcularEstadisticas() {
            let totalPreguntas = 0;
            let sumaNiveles = 0;
            
            datosCompletos.forEach(dominio => {
                dominio.preguntas.forEach(pregunta => {
                    totalPreguntas++;
                    sumaNiveles += pregunta.nivel;
                });
            });
            
            const nivelPromedio = sumaNiveles / totalPreguntas;
            const porcentaje = Math.round((nivelPromedio / 4) * 100);
            
            document.getElementById('globalMaturity').textContent = porcentaje + '%';
            document.getElementById('currentLevel').textContent = nivelPromedio.toFixed(1);
            document.getElementById('gapValue').textContent = (100 - porcentaje) + '%';
            document.getElementById('gapLevel').textContent = (4 - nivelPromedio).toFixed(1);
        }
        
        // Crear tabs de dominios
        function crearDomainTabs() {
            const tabsContainer = document.getElementById('domainTabs');
            datosCompletos.forEach((dominio, index) => {
                const tab = document.createElement('div');
                tab.className = 'domain-tab' + (index === 0 ? ' active' : '');
                tab.textContent = dominio.dominio;
                tab.onclick = () => seleccionarDominio(index);
                tabsContainer.appendChild(tab);
            });
        }
        
        // Seleccionar dominio
        function seleccionarDominio(index) {
            selectedDomain = index;
            
            // Actualizar tabs activos
            document.querySelectorAll('.domain-tab').forEach((tab, i) => {
                tab.classList.toggle('active', i === index);
            });
            
            // Mostrar preguntas del dominio
            mostrarPreguntas(index);
        }
        
        // Mostrar preguntas del dominio seleccionado
        function mostrarPreguntas(dominioIndex) {
            const container = document.getElementById('questionsContainer');
            const dominio = datosCompletos[dominioIndex];
            
            container.innerHTML = '';
            
            // Agregar informaci√≥n del objetivo escalonado para el dominio
            const objetivoInfo = document.createElement('div');
            objetivoInfo.className = 'info-box';
            objetivoInfo.style.marginBottom = '20px';
            objetivoInfo.innerHTML = `
                <strong>${dominio.dominio}</strong><br>
                üìç Estado actual: Nivel ${dominio.nivelActual.toFixed(1)}<br>
                üéØ Objetivos: 6 meses (${dominio.objetivo6meses.toFixed(1)}) ‚Üí 1 a√±o (${dominio.objetivo1a√±o.toFixed(1)}) ‚Üí 2 a√±os (${dominio.objetivo2a√±os.toFixed(1)})
            `;
            container.appendChild(objetivoInfo);
            
            dominio.preguntas.forEach((pregunta, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-item';
                questionDiv.style.animationDelay = `${index * 0.1}s`;
                
                const impactColor = pregunta.impacto === 'Alto' ? '#ff6b6b' : 
                                   pregunta.impacto === 'Medio' ? '#ffd93d' : '#6bcf7f';
                
                const responseColor = pregunta.nivel === 1 ? '#ff6b6b' :
                                     pregunta.nivel === 2 ? '#ffd93d' :
                                     pregunta.nivel === 3 ? '#6bcf7f' : '#4facfe';
                
                questionDiv.innerHTML = `
                    <div class="question-text">${index + 1}. ${pregunta.texto}</div>
                    <div class="question-response">
                        <span style="opacity: 0.7;">Respuesta:</span>
                        <div class="response-options">
                            <div class="response-option ${pregunta.respuesta === 'No' ? 'selected no' : 'no'}">
                                No (Nivel 1)
                            </div>
                            <div class="response-option ${pregunta.respuesta === 'Parcialmente' ? 'selected partial' : 'partial'}">
                                Parcialmente (Nivel 2)
                            </div>
                            <div class="response-option ${pregunta.respuesta === 'S√≠' ? 'selected yes' : 'yes'}">
                                S√≠ (Nivel 3)
                            </div>
                            <div class="response-option optimal">
                                √ìptimo (Nivel 4)
                            </div>
                        </div>
                    </div>
                    <div class="impact-indicator">
                        <span>Impacto: <strong style="color: ${impactColor}">${pregunta.impacto}</strong></span>
                        <div class="impact-bar">
                            <div class="impact-fill" style="background: ${responseColor}; width: ${(pregunta.nivel / 4) * 100}%"></div>
                        </div>
                        <span>Nivel ${pregunta.nivel}/4</span>
                    </div>
                    <div style="margin-top: 10px; padding: 10px; background: rgba(79, 172, 254, 0.1); border-radius: 8px; font-size: 0.85em;">
                        <strong>üìå Recomendaci√≥n:</strong> ${pregunta.recomendacion}
                    </div>
                `;
                
                container.appendChild(questionDiv);
            });
        }
        
        // Configuraci√≥n del gr√°fico de radar
        function crearGraficoRadar() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: datosCompletos.map(d => d.dominio.length > 25 ? d.dominio.substring(0, 22) + '...' : d.dominio),
                    datasets: [{
                        label: 'Estado Actual',
                        data: datosCompletos.map(d => d.nivelActual),
                        borderColor: 'rgba(255, 107, 107, 1)',
                        backgroundColor: 'rgba(255, 107, 107, 0.2)',
                        pointBackgroundColor: 'rgba(255, 107, 107, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(255, 107, 107, 1)',
                        borderWidth: 3
                    }, {
                        label: 'Objetivo 6 meses',
                        data: datosCompletos.map(d => d.objetivo6meses),
                        borderColor: 'rgba(255, 193, 61, 1)',
                        backgroundColor: 'rgba(255, 193, 61, 0.1)',
                        pointBackgroundColor: 'rgba(255, 193, 61, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(255, 193, 61, 1)',
                        borderWidth: 2,
                        borderDash: [5, 5]
                    }, {
                        label: 'Objetivo 1 a√±o',
                        data: datosCompletos.map(d => d.objetivo1a√±o),
                        borderColor: 'rgba(107, 207, 127, 1)',
                        backgroundColor: 'rgba(107, 207, 127, 0.1)',
                        pointBackgroundColor: 'rgba(107, 207, 127, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(107, 207, 127, 1)',
                        borderWidth: 2,
                        borderDash: [3, 3]
                    }, {
                        label: 'Objetivo 2 a√±os',
                        data: datosCompletos.map(d => d.objetivo2a√±os),
                        borderColor: 'rgba(76, 172, 254, 1)',
                        backgroundColor: 'rgba(76, 172, 254, 0.05)',
                        pointBackgroundColor: 'rgba(76, 172, 254, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(76, 172, 254, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.dataset.label;
                                    const value = context.parsed.r.toFixed(2);
                                    const percentage = Math.round((value / 4) * 100);
                                    return `${label}: Nivel ${value} (${percentage}%)`;
                                }
                            }
                        }
                    },
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 4,
                            ticks: {
                                stepSize: 1,
                                color: 'rgba(255, 255, 255, 0.6)',
                                callback: function(value) {
                                    const labels = {
                                        0: '0 - Inexistente',
                                        1: '1 - Inicial',
                                        2: '2 - En desarrollo',
                                        3: '3 - Definido',
                                        4: '4 - Optimizado'
                                    };
                                    return labels[value] || value;
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            pointLabels: {
                                color: 'rgba(255, 255, 255, 0.8)',
                                font: {
                                    size: 11
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Crear gr√°fico de roadmap
        function crearGraficoRoadmap() {
            const ctx = document.getElementById('roadmapChart').getContext('2d');
            
            const labels = datosCompletos.map(d => d.dominio.length > 20 ? d.dominio.substring(0, 17) + '...' : d.dominio);
            
            roadmapChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Estado Actual',
                        data: datosCompletos.map(d => d.nivelActual),
                        borderColor: 'rgba(255, 107, 107, 1)',
                        backgroundColor: 'rgba(255, 107, 107, 0.2)',
                        borderWidth: 3,
                        tension: 0.4,
                        fill: false
                    }, {
                        label: 'Objetivo 6 meses',
                        data: datosCompletos.map(d => d.objetivo6meses),
                        borderColor: 'rgba(255, 193, 61, 1)',
                        backgroundColor: 'rgba(255, 193, 61, 0.2)',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        tension: 0.4,
                        fill: false
                    }, {
                        label: 'Objetivo 1 a√±o',
                        data: datosCompletos.map(d => d.objetivo1a√±o),
                        borderColor: 'rgba(107, 207, 127, 1)',
                        backgroundColor: 'rgba(107, 207, 127, 0.2)',
                        borderWidth: 2,
                        borderDash: [3, 3],
                        tension: 0.4,
                        fill: false
                    }, {
                        label: 'Objetivo 2 a√±os',
                        data: datosCompletos.map(d => d.objetivo2a√±os),
                        borderColor: 'rgba(76, 172, 254, 1)',
                        backgroundColor: 'rgba(76, 172, 254, 0.2)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Evoluci√≥n Planificada de Madurez por Dominio',
                            color: 'rgba(255, 255, 255, 0.8)',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            labels: {
                                color: 'rgba(255, 255, 255, 0.8)'
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.dataset.label;
                                    const value = context.parsed.y.toFixed(2);
                                    const percentage = Math.round((value / 4) * 100);
                                    return `${label}: Nivel ${value} (${percentage}%)`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 4,
                            ticks: {
                                stepSize: 1,
                                color: 'rgba(255, 255, 255, 0.6)',
                                callback: function(value) {
                                    return 'Nivel ' + value;
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.6)',
                                maxRotation: 45,
                                minRotation: 45
                            },
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }
        
        // Generar an√°lisis de brechas
        function crearAnalisisBrechas() {
            const gapAnalysisDiv = document.getElementById('gapAnalysis');
            datosCompletos.forEach((item, index) => {
                const gapItem = document.createElement('div');
                gapItem.className = 'gap-item';
                gapItem.style.animationDelay = `${index * 0.1}s`;
                gapItem.onclick = () => seleccionarDominio(index);
                
                // Calcular los porcentajes para cada objetivo
                const porcentaje6meses = Math.round((item.objetivo6meses / 4) * 100);
                const porcentaje1a√±o = Math.round((item.objetivo1a√±o / 4) * 100);
                
                gapItem.innerHTML = `
                    <div class="gap-label">${item.dominio}</div>
                    <div class="gap-bar">
                        <div class="gap-fill-current" style="width: 0%; background: linear-gradient(90deg, #ff6b6b, #ff8787);" data-width="${item.porcentaje}%"></div>
                        <div style="position: absolute; left: ${porcentaje6meses}%; top: 0; height: 100%; width: 2px; background: rgba(255, 193, 61, 0.8); z-index: 10;"></div>
                        <div style="position: absolute; left: ${porcentaje1a√±o}%; top: 0; height: 100%; width: 2px; background: rgba(107, 207, 127, 0.8); z-index: 10;"></div>
                        <div class="gap-fill-target" style="width: 100%;"></div>
                    </div>
                    <div class="gap-value">
                        <span style="color: #ff6b6b;">${item.porcentaje}%</span> ‚Üí 
                        <span style="color: #ffd93d;">${porcentaje6meses}%</span> ‚Üí 
                        <span style="color: #6bcf7f;">${porcentaje1a√±o}%</span> ‚Üí 
                        <span style="color: #4facfe;">100%</span>
                    </div>
                `;
                
                gapAnalysisDiv.appendChild(gapItem);
            });
            
            // Animar las barras de progreso
            setTimeout(() => {
                document.querySelectorAll('.gap-fill-current').forEach(bar => {
                    bar.style.width = bar.getAttribute('data-width');
                });
            }, 500);
        }
        
        // Inicializar dashboard
        window.addEventListener('load', () => {
            calcularEstadisticas();
            crearDomainTabs();
            mostrarPreguntas(0);
            crearGraficoRadar();
            crearGraficoRoadmap();
            crearAnalisisBrechas();
        });
    </script>
</body>
</html>